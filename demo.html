<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reporte Estradas - Demo PWA</title>
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#3b82f6">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Reporte Estradas">
    <link rel="apple-touch-icon" href="icon-192.png">
    <link rel="manifest" href="manifest.json">
    
    <!-- Scripts -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        /* Reset e base */
        * {
            box-sizing: border-box;
        }
        
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }

        /* Gradientes modernos */
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .gradient-primary {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
        }
        
        .gradient-success {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        
        .gradient-danger {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
        }

        /* Cards com glassmorphism */
        .card-glass {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        .card-shadow {
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }

        /* Bot√µes modernos com alto relevo */
        .btn-primary, .btn-secondary, .btn-danger, .btn-success {
            border: none;
            font-weight: 600;
            border-radius: 16px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #2563eb 0%, #1e40af 100%);
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(59, 130, 246, 0.6);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%);
            color: white;
            box-shadow: 0 8px 25px rgba(107, 114, 128, 0.4);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
            box-shadow: 0 8px 25px rgba(239, 68, 68, 0.4);
        }
        
        .btn-success {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            box-shadow: 0 8px 25px rgba(16, 185, 129, 0.4);
        }

        /* Anima√ß√µes suaves */
        .hover-lift:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }
        
        .touch-feedback:active {
            transform: scale(0.97);
        }
        
        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }
        
        @keyframes fadeIn {
            from { 
                opacity: 0; 
                transform: translateY(30px); 
            }
            to { 
                opacity: 1; 
                transform: translateY(0); 
            }
        }
        
        .pulse-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { 
                transform: scale(1); 
            }
            50% { 
                transform: scale(1.08); 
            }
        }

        /* Navega√ß√£o moderna */
        .nav-modern {
            background: linear-gradient(135deg, #1e3a8a 0%, #3730a3 100%);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }
        
        .nav-button {
            background: rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: white;
            padding: 10px 16px;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .nav-button:hover, .nav-button.active {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(255, 255, 255, 0.1);
        }

        /* Inputs modernos */
        .input-modern {
            border: 2px solid rgba(59, 130, 246, 0.2);
            border-radius: 16px;
            padding: 16px 20px;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.9);
            font-size: 16px;
        }
        
        .input-modern:focus {
            border-color: #3b82f6;
            outline: none;
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.1);
            background: white;
        }

        /* Camera styling */
        .camera-video {
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            border: 4px solid rgba(255, 255, 255, 0.9);
        }

        /* Badge styles */
        .badge {
            border-radius: 25px;
            padding: 6px 16px;
            font-size: 12px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        .badge-priority-alta {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
        }
        
        .badge-priority-media {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white;
        }
        
        .badge-priority-baixa {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
        }

        /* Mobile optimizations */
        @media (max-width: 768px) {
            .container-mobile {
                padding: 1rem;
                max-width: 100%;
            }
            
            .card-mobile {
                margin: 0;
                border-radius: 20px;
            }
            
            .text-mobile {
                font-size: 14px;
            }
        }

        /* Dark mode support */
        @media (prefers-color-scheme: dark) {
            .card-glass {
                background: rgba(31, 41, 55, 0.95);
                border: 1px solid rgba(255, 255, 255, 0.1);
                color: white;
            }
        }

        /* Loading spinner */
        .spinner {
            border: 4px solid rgba(59, 130, 246, 0.1);
            border-left: 4px solid #3b82f6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Scrollbar personalizada */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            border-radius: 10px;
        }
    </style>
</head>
<body class="gradient-bg">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef, useEffect } = React;
            color: white;
            font-weight: 600;
            border-radius: 12px;
            transition: all 0.3s ease;
        }

        /* Navega√ß√£o moderna */
        .nav-modern {
            background: linear-gradient(135deg, #1e3a8a 0%, #3730a3 100%);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .nav-button {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            color: white;
            padding: 8px 12px;
            transition: all 0.3s ease;
        }
        
        .nav-button:hover, .nav-button.active {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-1px);
        }

        /* Camera video styling */
        .camera-video {
            border-radius: 16px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            border: 3px solid rgba(255, 255, 255, 0.9);
        }

        /* Input styling */
        .input-modern {
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 12px 16px;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.9);
        }
        
        .input-modern:focus {
            border-color: #3b82f6;
            outline: none;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        /* Badge styles */
        .badge {
            border-radius: 20px;
            padding: 4px 12px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Mobile optimizations */
        @media (max-width: 640px) {
            .container-mobile {
                padding: 1rem;
                max-width: 100%;
            }
            
            .card-mobile {
                margin: 0 -0.5rem;
                border-radius: 16px 16px 0 0;
            }
        }

        /* Dark mode support */
        @media (prefers-color-scheme: dark) {
            .card-glass {
                background: rgba(31, 41, 55, 0.95);
                border: 1px solid rgba(255, 255, 255, 0.1);
            }
        }
    </style>
</head>
<body class="gradient-bg min-h-screen">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef, useEffect } = React;

        // Componente de navega√ß√£o
        function Navigation({ currentPage, setCurrentPage }) {
            return (
                <nav className="nav-modern p-4 shadow-xl sticky top-0 z-50">
                    <div className="max-w-md mx-auto flex justify-between items-center">
                        <div className="flex items-center space-x-3">
                            <div className="w-10 h-10 bg-white bg-opacity-20 rounded-full flex items-center justify-center">
                                <span className="text-xl">üõ£Ô∏è</span>
                            </div>
                            <h1 className="text-xl font-bold text-white">Reporte Estradas</h1>
                        </div>
                        <div className="flex space-x-3">
                            <button 
                                onClick={() => setCurrentPage('home')}
                                className={`nav-button flex items-center space-x-2 ${
                                    currentPage === 'home' ? 'active' : ''
                                }`}
                            >
                                <span className="text-lg">üè†</span>
                                <span className="hidden sm:inline text-sm">In√≠cio</span>
                            </button>
                            <button 
                                onClick={() => setCurrentPage('history')}
                                className={`nav-button flex items-center space-x-2 ${
                                    currentPage === 'history' ? 'active' : ''
                                }`}
                            >
                                <span className="text-lg">üìã</span>
                                <span className="hidden sm:inline text-sm">Hist√≥rico</span>
                            </button>
                        </div>
                    </div>
                </nav>
            );
        }

        // Componente para captura de fotos
        function CameraCapture({ onPhotoCapture, photos, onRemovePhoto }) {
            const videoRef = useRef(null);
            const canvasRef = useRef(null);
            const [isStreaming, setIsStreaming] = useState(false);
            const [error, setError] = useState('');

            const startCamera = async () => {
                try {
                    const stream = await navigator.mediaDevices.getUserMedia({ 
                        video: { facingMode: 'environment' }
                    });
                    if (videoRef.current) {
                        videoRef.current.srcObject = stream;
                        setIsStreaming(true);
                        setError('');
                    }
                } catch (err) {
                    setError('Erro ao acessar a c√¢mera. Verifique as permiss√µes.');
                }
            };

            const stopCamera = () => {
                if (videoRef.current && videoRef.current.srcObject) {
                    const tracks = videoRef.current.srcObject.getTracks();
                    tracks.forEach(track => track.stop());
                    setIsStreaming(false);
                }
            };

            const capturePhoto = () => {
                if (videoRef.current && canvasRef.current) {
                    const canvas = canvasRef.current;
                    const video = videoRef.current;
                    canvas.width = video.videoWidth;
                    canvas.height = video.videoHeight;
                    
                    const ctx = canvas.getContext('2d');
                    ctx.drawImage(video, 0, 0);
                    
                    canvas.toBlob((blob) => {
                        const photoUrl = URL.createObjectURL(blob);
                        onPhotoCapture({
                            id: Date.now(),
                            url: photoUrl,
                            blob: blob,
                            timestamp: new Date().toLocaleString()
                        });
                    }, 'image/jpeg', 0.8);
                }
            };

            return (
                <div className="space-y-6 fade-in">
                    <div className="flex justify-between items-center">
                        <h3 className="text-lg font-semibold text-gray-800 flex items-center">
                            <span className="text-2xl mr-2">üì∏</span>
                            Fotos do Problema
                        </h3>
                        <span className="badge bg-blue-100 text-blue-800">
                            {photos.length} foto(s)
                        </span>
                    </div>

                    {error && (
                        <div className="bg-red-50 border-l-4 border-red-400 p-4 rounded-r-lg">
                            <div className="flex">
                                <span className="text-red-400 text-xl mr-3">‚ö†Ô∏è</span>
                                <p className="text-red-700">{error}</p>
                            </div>
                        </div>
                    )}

                    {!isStreaming ? (
                        <button 
                            onClick={startCamera} 
                            className="w-full btn-primary py-4 px-6 text-lg font-medium hover-lift touch-feedback flex items-center justify-center space-x-3"
                        >
                            <span className="text-2xl">üì∑</span>
                            <span>Abrir C√¢mera</span>
                        </button>
                    ) : (
                        <div className="space-y-4 fade-in">
                            <div className="relative">
                                <video 
                                    ref={videoRef} 
                                    autoPlay 
                                    playsInline
                                    className="w-full camera-video"
                                />
                                <canvas ref={canvasRef} className="hidden" />
                                <div className="absolute top-4 right-4 bg-red-500 text-white px-3 py-1 rounded-full text-sm font-medium pulse-animation">
                                    ‚óè LIVE
                                </div>
                            </div>
                            <div className="flex space-x-3">
                                <button 
                                    onClick={capturePhoto} 
                                    className="flex-1 btn-primary py-3 px-4 font-medium hover-lift touch-feedback flex items-center justify-center space-x-2"
                                >
                                    <span className="text-xl">ÔøΩ</span>
                                    <span>Capturar</span>
                                </button>
                                <button 
                                    onClick={stopCamera} 
                                    className="btn-secondary py-3 px-4 font-medium hover-lift touch-feedback"
                                >
                                    <span className="text-xl">‚úï</span>
                                </button>
                            </div>
                        </div>
                    )}

                    {photos.length > 0 && (
                        <div className="space-y-4 fade-in">
                            <h4 className="font-medium text-gray-700 flex items-center">
                                <span className="text-lg mr-2">üñºÔ∏è</span>
                                Fotos Capturadas
                            </h4>
                            <div className="grid grid-cols-2 gap-3">
                                {photos.map((photo) => (
                                    <div key={photo.id} className="relative group hover-lift">
                                        <img 
                                            src={photo.url} 
                                            alt="Foto do problema" 
                                            className="w-full h-32 object-cover rounded-xl shadow-lg"
                                        />
                                        <button
                                            onClick={() => onRemovePhoto(photo.id)}
                                            className="absolute -top-2 -right-2 btn-danger w-8 h-8 rounded-full flex items-center justify-center text-sm opacity-0 group-hover:opacity-100 transition-opacity shadow-lg"
                                        >
                                            ‚úï
                                        </button>
                                        <div className="absolute bottom-2 left-2 bg-black bg-opacity-70 text-white text-xs px-2 py-1 rounded-lg">
                                            {photo.timestamp}
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        // Componente para geolocaliza√ß√£o
        function LocationCapture({ location, onLocationCapture }) {
            const [loading, setLoading] = useState(false);
            const [error, setError] = useState('');

            const getCurrentLocation = () => {
                setLoading(true);
                setError('');

                if (!navigator.geolocation) {
                    setError('Geolocaliza√ß√£o n√£o √© suportada neste navegador.');
                    setLoading(false);
                    return;
                }

                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        onLocationCapture({
                            latitude: position.coords.latitude,
                            longitude: position.coords.longitude,
                            accuracy: position.coords.accuracy,
                            timestamp: new Date().toLocaleString()
                        });
                        setLoading(false);
                    },
                    (err) => {
                        setError('Erro ao obter localiza√ß√£o. Verifique as permiss√µes.');
                        setLoading(false);
                    },
                    {
                        enableHighAccuracy: true,
                        timeout: 10000,
                        maximumAge: 60000
                    }
                );
            };

            return (
                <div className="space-y-6 fade-in">
                    <div className="flex justify-between items-center">
                        <h3 className="text-lg font-semibold text-gray-800 flex items-center">
                            <span className="text-2xl mr-2">üìç</span>
                            Localiza√ß√£o
                        </h3>
                        {location && (
                            <span className="badge bg-green-100 text-green-800">
                                ‚úì Capturada
                            </span>
                        )}
                    </div>

                    {error && (
                        <div className="bg-red-50 border-l-4 border-red-400 p-4 rounded-r-lg">
                            <div className="flex">
                                <span className="text-red-400 text-xl mr-3">‚ö†Ô∏è</span>
                                <p className="text-red-700">{error}</p>
                            </div>
                        </div>
                    )}

                    {!location ? (
                        <button 
                            onClick={getCurrentLocation} 
                            disabled={loading}
                            className={`w-full py-4 px-6 text-lg font-medium rounded-xl hover-lift touch-feedback flex items-center justify-center space-x-3 ${
                                loading 
                                    ? 'bg-gray-400 cursor-not-allowed' 
                                    : 'btn-primary'
                            }`}
                        >
                            <span className="text-2xl">{loading ? '‚è≥' : 'üìç'}</span>
                            <span>{loading ? 'Obtendo localiza√ß√£o...' : 'Capturar Localiza√ß√£o'}</span>
                        </button>
                    ) : (
                        <div className="card-glass card-shadow rounded-xl p-6 hover-lift">
                            <div className="flex items-center justify-between mb-4">
                                <h4 className="font-semibold text-gray-800 flex items-center">
                                    <span className="text-lg mr-2">üó∫Ô∏è</span>
                                    Coordenadas GPS
                                </h4>
                                <span className="badge bg-blue-100 text-blue-800">
                                    ¬±{Math.round(location.accuracy)}m
                                </span>
                            </div>
                            <div className="space-y-3 text-sm">
                                <div className="flex justify-between">
                                    <span className="text-gray-600 font-medium">Latitude:</span>
                                    <span className="font-mono text-gray-800">{location.latitude.toFixed(6)}</span>
                                </div>
                                <div className="flex justify-between">
                                    <span className="text-gray-600 font-medium">Longitude:</span>
                                    <span className="font-mono text-gray-800">{location.longitude.toFixed(6)}</span>
                                </div>
                                <div className="flex justify-between">
                                    <span className="text-gray-600 font-medium">Capturada em:</span>
                                    <span className="text-gray-800">{location.timestamp}</span>
                                </div>
                            </div>
                            <button 
                                onClick={getCurrentLocation} 
                                disabled={loading}
                                className="mt-4 w-full btn-secondary py-2 px-4 text-sm hover-lift touch-feedback flex items-center justify-center space-x-2"
                            >
                                <span>üîÑ</span>
                                <span>Atualizar Localiza√ß√£o</span>
                            </button>
                        </div>
                    )}
                </div>
            );
        }

        // Tela principal de reporte
        function ReportScreen() {
            const [photos, setPhotos] = useState([]);
            const [location, setLocation] = useState(null);
            const [formData, setFormData] = useState({
                tipo: '',
                descricao: '',
                urgencia: 'media'
            });
            const [isSubmitting, setIsSubmitting] = useState(false);
            const [submitSuccess, setSubmitSuccess] = useState(false);

            const handlePhotoCapture = (photo) => {
                setPhotos(prev => [...prev, photo]);
            };

            const handleRemovePhoto = (photoId) => {
                setPhotos(prev => prev.filter(photo => photo.id !== photoId));
            };

            const handleLocationCapture = (loc) => {
                setLocation(loc);
            };

            const handleInputChange = (field, value) => {
                setFormData(prev => ({ ...prev, [field]: value }));
            };

            const handleSubmit = async (e) => {
                e.preventDefault();
                setIsSubmitting(true);

                try {
                    await new Promise(resolve => setTimeout(resolve, 2000));
                    
                    const reporte = {
                        id: Date.now(),
                        ...formData,
                        photos: photos.length,
                        location: location ? `${location.latitude.toFixed(6)}, ${location.longitude.toFixed(6)}` : 'N√£o informada',
                        status: 'enviado',
                        timestamp: new Date().toLocaleString()
                    };
                    
                    const historico = JSON.parse(localStorage.getItem('reportes') || '[]');
                    historico.unshift(reporte);
                    localStorage.setItem('reportes', JSON.stringify(historico));
                    
                    setSubmitSuccess(true);
                    
                    setTimeout(() => {
                        setPhotos([]);
                        setLocation(null);
                        setFormData({ tipo: '', descricao: '', urgencia: 'media' });
                        setSubmitSuccess(false);
                    }, 3000);
                    
                } catch (error) {
                    console.error('Erro ao enviar reporte:', error);
                } finally {
                    setIsSubmitting(false);
                }
            };

            if (submitSuccess) {
                return (
                    <div className="container-mobile max-w-md mx-auto p-4 fade-in">
                        <div className="card-glass card-shadow rounded-2xl p-8 text-center hover-lift">
                            <div className="text-8xl mb-6 pulse-animation">üéâ</div>
                            <h2 className="text-2xl font-bold bg-gradient-to-r from-green-600 to-green-500 bg-clip-text text-transparent mb-3">
                                Reporte Enviado!
                            </h2>
                            <p className="text-gray-600 mb-6 leading-relaxed">
                                Seu reporte foi enviado com sucesso para a prefeitura. 
                                Voc√™ receber√° atualiza√ß√µes sobre o andamento do reparo.
                            </p>
                            <div className="bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4 mb-4">
                                <span className="badge bg-blue-100 text-blue-800 text-base">
                                    üîñ Protocolo: #{Date.now().toString().slice(-6)}
                                </span>
                            </div>
                            <div className="text-xs text-gray-500">
                                Guarde este n√∫mero para acompanhar seu reporte
                            </div>
                        </div>
                    </div>
                );
            }

            return (
                <div className="container-mobile max-w-md mx-auto p-4 space-y-6">
                    <div className="card-glass card-shadow rounded-2xl p-6 hover-lift fade-in">
                        <div className="text-center mb-6">
                            <div className="w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4">
                                <span className="text-2xl text-white">üõ£Ô∏è</span>
                            </div>
                            <h2 className="text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent mb-2">
                                Reportar Problema
                            </h2>
                            <p className="text-gray-600 leading-relaxed">
                                Documente problemas nas vias p√∫blicas para que a prefeitura possa tomar as devidas provid√™ncias.
                            </p>
                        </div>
                        
                        <form onSubmit={handleSubmit} className="space-y-6">
                            <div className="space-y-3">
                                <label className="block text-sm font-semibold text-gray-700 flex items-center">
                                    <span className="text-lg mr-2">üè∑Ô∏è</span>
                                    Tipo do Problema
                                </label>
                                <select 
                                    value={formData.tipo}
                                    onChange={(e) => handleInputChange('tipo', e.target.value)}
                                    className="w-full input-modern"
                                    required
                                >
                                    <option value="">Selecione o tipo</option>
                                    <option value="buraco">üï≥Ô∏è Buraco na pista</option>
                                    <option value="rachadura">‚ö° Rachadura no asfalto</option>
                                    <option value="sinalizacao">üöß Problema de sinaliza√ß√£o</option>
                                    <option value="drenagem">üåä Problema de drenagem</option>
                                    <option value="iluminacao">üí° Ilumina√ß√£o p√∫blica</option>
                                    <option value="outros">‚ùì Outros</option>
                                </select>
                            </div>

                            <div className="space-y-3">
                                <label className="block text-sm font-semibold text-gray-700 flex items-center">
                                    <span className="text-lg mr-2">üìù</span>
                                    Descri√ß√£o do Problema
                                </label>
                                <textarea
                                    placeholder="Descreva detalhadamente o problema encontrado..."
                                    value={formData.descricao}
                                    onChange={(e) => handleInputChange('descricao', e.target.value)}
                                    required
                                    rows={4}
                                    className="w-full input-modern resize-none"
                                />
                            </div>

                            <div className="space-y-3">
                                <label className="block text-sm font-semibold text-gray-700 flex items-center">
                                    <span className="text-lg mr-2">‚ö°</span>
                                    N√≠vel de Urg√™ncia
                                </label>
                                <div className="grid grid-cols-3 gap-2">
                                    {[
                                        { value: 'baixa', label: 'Baixa', emoji: 'üü¢', color: 'bg-green-100 text-green-800 border-green-200' },
                                        { value: 'media', label: 'M√©dia', emoji: 'üü°', color: 'bg-yellow-100 text-yellow-800 border-yellow-200' },
                                        { value: 'alta', label: 'Alta', emoji: 'üî¥', color: 'bg-red-100 text-red-800 border-red-200' }
                                    ].map((urgencia) => (
                                        <button
                                            key={urgencia.value}
                                            type="button"
                                            onClick={() => handleInputChange('urgencia', urgencia.value)}
                                            className={`p-3 rounded-xl text-sm font-semibold border-2 transition-all hover-lift touch-feedback ${
                                                formData.urgencia === urgencia.value 
                                                    ? urgencia.color + ' shadow-lg scale-105' 
                                                    : 'bg-gray-50 text-gray-600 border-gray-200 hover:bg-gray-100'
                                            }`}
                                        >
                                            <div className="text-lg mb-1">{urgencia.emoji}</div>
                                            {urgencia.label}
                                        </button>
                                    ))}
                                </div>
                            </div>

                            <CameraCapture 
                                onPhotoCapture={handlePhotoCapture}
                                photos={photos}
                                onRemovePhoto={handleRemovePhoto}
                            />

                            <LocationCapture 
                                location={location}
                                onLocationCapture={handleLocationCapture}
                            />

                            <button 
                                type="submit" 
                                className={`w-full py-4 px-6 text-lg font-bold rounded-xl hover-lift touch-feedback flex items-center justify-center space-x-3 ${
                                    isSubmitting || !formData.tipo || !formData.descricao
                                        ? 'bg-gray-400 cursor-not-allowed' 
                                        : 'btn-primary shadow-lg'
                                }`}
                                disabled={isSubmitting || !formData.tipo || !formData.descricao}
                            >
                                <span className="text-2xl">{isSubmitting ? '‚è≥' : 'üì§'}</span>
                                <span>{isSubmitting ? 'Enviando...' : 'Enviar Reporte'}</span>
                            </button>
                        </form>
                    </div>
                </div>
            );
        }

        // Tela de hist√≥rico
        function HistoryScreen({ setCurrentPage }) {
            const [reportes, setReportes] = useState([]);

            useEffect(() => {
                const historico = JSON.parse(localStorage.getItem('reportes') || '[]');
                setReportes(historico);
            }, []);

            const getStatusColor = (status) => {
                switch (status) {
                    case 'enviado': return 'bg-blue-100 text-blue-800 border-blue-200';
                    case 'em_andamento': return 'bg-yellow-100 text-yellow-800 border-yellow-200';
                    case 'concluido': return 'bg-green-100 text-green-800 border-green-200';
                    default: return 'bg-gray-100 text-gray-800 border-gray-200';
                }
            };

            const getUrgenciaColor = (urgencia) => {
                switch (urgencia) {
                    case 'baixa': return 'bg-green-100 text-green-800 border-green-200';
                    case 'media': return 'bg-yellow-100 text-yellow-800 border-yellow-200';
                    case 'alta': return 'bg-red-100 text-red-800 border-red-200';
                    default: return 'bg-gray-100 text-gray-800 border-gray-200';
                }
            };

            return (
                <div className="container-mobile max-w-md mx-auto p-4 space-y-6">
                    <div className="card-glass card-shadow rounded-2xl p-6 hover-lift fade-in">
                        <div className="text-center mb-4">
                            <div className="w-16 h-16 bg-gradient-to-r from-purple-500 to-pink-600 rounded-full flex items-center justify-center mx-auto mb-4">
                                <span className="text-2xl text-white">üìã</span>
                            </div>
                            <h2 className="text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-2">
                                Hist√≥rico de Reportes
                            </h2>
                            <p className="text-gray-600">
                                Acompanhe o status dos seus reportes enviados
                            </p>
                        </div>
                    </div>

                    {reportes.length === 0 ? (
                        <div className="card-glass card-shadow rounded-2xl p-8 text-center hover-lift fade-in">
                            <div className="text-8xl mb-6">ÔøΩ</div>
                            <h3 className="text-xl font-bold text-gray-700 mb-3">Nenhum reporte ainda</h3>
                            <p className="text-gray-600 mb-6">
                                Voc√™ ainda n√£o fez nenhum reporte. Que tal come√ßar agora?
                            </p>
                            <button 
                                onClick={() => setCurrentPage('home')}
                                className="btn-primary py-3 px-6 font-medium hover-lift touch-feedback flex items-center justify-center space-x-2 mx-auto"
                            >
                                <span className="text-xl">‚ûï</span>
                                <span>Fazer Primeiro Reporte</span>
                            </button>
                        </div>
                    ) : (
                        <div className="space-y-4 fade-in">
                            {reportes.map((reporte, index) => (
                                <div 
                                    key={reporte.id} 
                                    className="card-glass card-shadow rounded-xl p-5 hover-lift"
                                    style={{ animationDelay: `${index * 0.1}s` }}
                                >
                                    <div className="flex justify-between items-start mb-3">
                                        <h3 className="font-bold text-gray-800 capitalize flex items-center">
                                            <span className="text-lg mr-2">
                                                {reporte.tipo === 'buraco' ? 'üï≥Ô∏è' :
                                                 reporte.tipo === 'rachadura' ? '‚ö°' :
                                                 reporte.tipo === 'sinalizacao' ? 'üöß' :
                                                 reporte.tipo === 'drenagem' ? 'üåä' :
                                                 reporte.tipo === 'iluminacao' ? 'üí°' : '‚ùì'}
                                            </span>
                                            {reporte.tipo.replace('_', ' ')}
                                        </h3>
                                        <span className={`badge ${getStatusColor(reporte.status)}`}>
                                            {reporte.status === 'enviado' ? 'üì§ Enviado' : 
                                             reporte.status === 'em_andamento' ? 'üîÑ Em Andamento' : '‚úÖ Conclu√≠do'}
                                        </span>
                                    </div>
                                    
                                    <p className="text-sm text-gray-600 mb-4 leading-relaxed">
                                        {reporte.descricao}
                                    </p>
                                    
                                    <div className="flex justify-between items-center text-xs">
                                        <div className="flex items-center space-x-3">
                                            <span className={`badge ${getUrgenciaColor(reporte.urgencia)}`}>
                                                {reporte.urgencia === 'baixa' ? 'üü¢ Baixa' :
                                                 reporte.urgencia === 'media' ? 'üü° M√©dia' : 'üî¥ Alta'}
                                            </span>
                                            {reporte.photos > 0 && (
                                                <span className="flex items-center text-gray-500">
                                                    <span className="mr-1">üì∑</span>
                                                    {reporte.photos}
                                                </span>
                                            )}
                                            {reporte.location !== 'N√£o informada' && (
                                                <span className="flex items-center text-gray-500">
                                                    <span className="mr-1">üìç</span>
                                                    GPS
                                                </span>
                                            )}
                                        </div>
                                        <span className="text-gray-500 font-mono">
                                            {reporte.timestamp}
                                        </span>
                                    </div>
                                </div>
                            ))}
                        </div>
                    )}
                </div>
            );
        }

        // Componente principal
        function App() {
            const [currentPage, setCurrentPage] = useState('home');

            return (
                <div className="min-h-screen">
                    <Navigation currentPage={currentPage} setCurrentPage={setCurrentPage} />
                    <main className="pb-8 pt-4">
                        {currentPage === 'home' ? <ReportScreen /> : <HistoryScreen setCurrentPage={setCurrentPage} />}
                    </main>
                    
                    {/* Footer */}
                    <footer className="text-center py-6 text-white text-sm opacity-80">
                        <p>¬© 2025 Prefeitura Municipal - Reporte Estradas</p>
                        <p className="text-xs mt-1">Desenvolvido para o bem da comunidade üèòÔ∏è</p>
                    </footer>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>

